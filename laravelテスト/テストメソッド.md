# 機能テストメソッド

- **`値1` には「期待値」**
- **`値2` には「実際の結果の値」**

## 値そのものを検証するテスト（Unitでよく使う）

| メソッド                                           | 説明                                   | 引数の構成（第1引数 / 第2引数）             |
| -------------------------------------------------- | -------------------------------------- | ------------------------------------------- |
| `assertTrue($値)`                                  | 値が `true` か確認                     | 条件式（trueであるべきもの） / なし         |
| `assertFalse($値)`                                 | 値が `false` か確認                    | 条件式（falseであるべきもの） / なし        |
| `assertEquals($期待値, $実際の値)`                 | 期待値と結果が等しいか確認             | 期待値 / 実際の結果                         |
| `assertNotEquals($期待値, $実際の値)`              | 等しくないことを確認                   | 期待値 / 実際の結果                         |
| `assertLessThan($値1, $値2)`                       | 値1より値2が小さいか                   | 値1（基準値） / 値2（比較対象）             |
| `assertGreaterThan($値1, $値2)`                    | 値1より値2が大きいか                   | 値1（基準値） / 値2（比較対象）             |
| `assertCount($数, $配列)`                          | 配列やコレクションの要素数が一致するか | 期待する個数 / 対象の配列またはコレクション |
| `assertEmpty($値)`                                 | 値が空かどうか確認                     | 対象の値 / なし                             |
| `assertNotEmpty($値)`                              | 値が空でないことを確認                 | 対象の値 / なし                             |
| `assertNull($値)`                                  | 値が null かどうか確認                 | 対象の値 / なし                             |
| `assertNotNull($値)`                               | 値が null でないか確認                 | 対象の値 / なし                             |
| `assertSame($期待値, $実際の値)`                   | 値と型まで完全一致するか確認           | 期待値 / 実際の値                           |
| `assertInstanceOf($クラス名, $オブジェクト)`       | オブジェクトが指定したクラスか確認     | クラス名 / インスタンス                     |
| `assertStringStartsWith($開始文字列, $対象文字列)` | 文頭一致を確認                         | 期待する開始文字列 / 実際の文字列           |
| `assertStringEndsWith($終了文字列, $対象文字列)`   | 文末一致を確認                         | 期待する終了文字列 / 実際の文字列           |

---

## HTTPレスポンス・ビュー・セッション関連（Feature Testでよく使う）

| メソッド                        | 説明                                   | 第1引数 / 第2引数                      |
| ------------------------------- | -------------------------------------- | -------------------------------------- |
| `assertStatus($コード)`         | ステータスコードが一致するか           | HTTPコード（例：200） / なし           |
| `assertRedirect($パス)`         | リダイレクト先のURLが正しいか          | パス文字列（例：/home） / なし         |
| `assertViewIs($ビュー名)`       | 使用されたビュー名が一致するか         | ビュー名（例：users.index） / なし     |
| `assertViewHas($変数名)`        | ビューに変数が渡されているか           | 変数名（例：user） / なし or 値        |
| `assertViewHasAll($変数名配列)` | 指定変数すべてが渡されているか         | 配列形式（例：['user','post']） / なし |
| `assertSessionHas($キー, $値)`  | セッションにキーと値が存在するか       | キー（文字列） / 期待する値            |
| `assertSessionMissing($キー)`   | セッションにキーが存在しないことを確認 | キー（文字列） / なし                  |
| `assertSee($文字列)`            | HTMLに文字列が含まれているか           | 検索文字列 / なし                      |
| `assertDontSee($文字列)`        | HTMLに文字列が含まれていないことを確認 | 非表示であるべき文字列 / なし          |

---

## JSONレスポンス関連

| メソッド                         | 説明                             | 第1引数 / 第2引数                     |
| -------------------------------- | -------------------------------- | ------------------------------------- |
| `assertJson()`                   | JSON形式でレスポンスされているか | 期待する配列（キーと値） / なし       |
| `assertExactJson($期待値)`       | 完全一致するJSONレスポンスか     | 完全一致配列 / なし                   |
| `assertJsonFragment([...])`      | JSONの一部分に一致する値があるか | 部分一致配列 / なし                   |
| `assertJsonMissing([...])`       | JSON内に含まれていないことを確認 | 存在してはいけない部分一致配列 / なし |
| `assertHeader($ヘッダー名, $値)` | レスポンスヘッダーが正しいか     | ヘッダー名 / 期待するヘッダー値       |

---

## データベース関連

| メソッド                                    | 説明                                   | 第1引数 / 第2引数           |
| ------------------------------------------- | -------------------------------------- | --------------------------- |
| `assertDatabaseHas('テーブル', [条件])`     | DBにデータが存在するか                 | テーブル名 / 検索条件の配列 |
| `assertDatabaseMissing('テーブル', [条件])` | DBにデータが存在しないか               | テーブル名 / 検索条件の配列 |
| `assertModelExists($モデル)`                | 指定モデルのインスタンスが存在するか   | モデルインスタンス / なし   |
| `assertModelMissing($モデル)`               | 指定モデルのインスタンスが存在しないか | モデルインスタンス / なし   |

---

## 📁 ファイル・ストレージ関連

| メソッド                              | 説明                               | 第1引数 / 第2引数                       |
| ------------------------------------- | ---------------------------------- | --------------------------------------- |
| `Storage::disk(...)->assertExists()`  | 指定ファイルが存在するか           | ファイルパス / なし                     |
| `Storage::disk(...)->assertMissing()` | 指定ファイルが存在しないこと       | ファイルパス / なし                     |
| `assertDownload($ファイル名)`         | レスポンスがダウンロードであること | ダウンロードされるべきファイル名 / なし |

---

## その他よく使う基本メソッド（値や状態を確認）

| メソッド                                     | 説明                       | 第1引数 / 第2引数               |
| -------------------------------------------- | -------------------------- | ------------------------------- |
| `assertSame($期待値, $結果)`                 | 値と型まで一致             | 期待する値 / 実際の値           |
| `assertNotSame($期待値, $結果)`              | 型まで同じではない         | 期待する値 / 実際の値           |
| `assertContains($値, $配列)`                 | 配列に値が含まれるか       | 含まれてるべき値 / 対象の配列   |
| `assertNotContains($値, $配列)`              | 配列に値が含まれていないか | 含まれてないべき値 / 対象の配列 |
| `assertStringContainsString($部分, $文字列)` | 部分文字列が含まれるか     | 部分文字列 / 実際の文字列       |

---

## 例外・スキップ系

| メソッド                              | 説明                       | 第1引数 / 第2引数       |
| ------------------------------------- | -------------------------- | ----------------------- |
| `expectException($例外クラス)`        | 指定の例外が発生するか     | 例外クラス名 / なし     |
| `expectExceptionMessage($メッセージ)` | 例外メッセージが一致するか | メッセージ文字列 / なし |
| `markTestIncomplete()`                | テ                         |